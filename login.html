<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Author Login — Camila Tiburcio Rubio</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400..800&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            serif: ['Source Serif 4', 'Georgia', 'serif']
          },
          colors: {
            ink: { 900: '#0E0E0E', 700: '#1F1F1F', 500: '#3A3A3A', 300: '#9CA3AF' },
            cream: '#FAF7F2',
            accent: { DEFAULT: '#C53D2F', dark: '#9E2F24', light: '#E95A49' }
          },
          boxShadow: { soft: '0 10px 30px rgba(0,0,0,0.06)' }
        }
      }
    }
  </script>

  <style>
    .u-underline { position: relative; }
    .u-underline::after {
      content: '';
      position: absolute;
      left: 0; bottom: -2px;
      height: 2px; width: 100%;
      background: currentColor;
      transform: scaleX(0);
      transform-origin: left;
      transition: transform .25s ease;
    }
    .u-underline:hover::after { transform: scaleX(1); }
  </style>
</head>

<body class="bg-cream text-ink-900 antialiased min-h-screen flex flex-col">

  <!-- Header -->
  <header class="border-b border-black/5 bg-cream/95 backdrop-blur sticky top-0 z-30">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2">
        <img src="assets/logo.png" class="h-10 w-10 object-contain" alt="">
        <span class="font-serif text-xl sm:text-2xl tracking-tight">Camila Tiburcio Rubio</span>
      </a>
      <a href="index.html" class="hidden sm:inline text-sm u-underline">← Back to site</a>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 flex items-center justify-center px-4 py-10">
    <div class="max-w-md w-full">

      <p class="text-[11px] uppercase tracking-[0.18em] text-ink-300 text-center mb-2">
        Author Access
      </p>

      <div class="text-center mb-6">
        <h1 class="font-serif text-3xl tracking-tight">Sign in to the studio</h1>
        <p class="text-sm text-ink-400 mt-2 max-w-xs mx-auto">Private writing space for Camila.</p>
      </div>

      <div class="bg-white rounded-2xl shadow-soft border border-black/5 p-6 sm:p-7 space-y-4">

        <label class="block">
          <span class="text-sm text-ink-700">Access key</span>
          <input id="adminKey" type="password"
            class="mt-1 w-full px-4 py-2.5 rounded-xl border border-black/10 bg-cream/40 text-sm outline-none focus:ring-2 focus:ring-accent/40"
            placeholder="Enter key…" autocomplete="off"/>
        </label>

        <button id="loginBtn"
          class="w-full px-4 py-2.5 rounded-xl bg-accent text-white text-sm font-semibold shadow-soft hover:bg-accent-dark transition">
          Enter Admin
        </button>

        <p id="errorMsg" class="text-xs text-accent mt-1 text-center hidden"></p>

      </div>
    </div>
  </main>

  <footer class="border-t border-black/5 bg-white/70">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 text-[11px] text-ink-300 flex items-center justify-between">
      <span>© <span id="year"></span> Camila Tiburcio Rubio</span>
      <a href="index.html" class="u-underline">Return to site</a>
    </div>
  </footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  const ADMIN_HASH_HEX = "e3373a2262f1092c7358d2fc18dc75493369ec1280e9f7e18e12537b06d985a9";

  const keyInput = document.getElementById("adminKey");
  const loginBtn = document.getElementById("loginBtn");
  const errorMsg = document.getElementById("errorMsg");

  // Convert plaintext → SHA-256 hex
  async function sha256Hex(text) {
    const enc = new TextEncoder();
    const data = enc.encode(text);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    return [...new Uint8Array(hashBuffer)]
      .map(b => b.toString(16).padStart(2, '0'))
      .join('');
  }

  async function attemptLogin() {
    const value = keyInput.value.trim();
    if (!value) {
      errorMsg.textContent = "Please enter the key.";
      errorMsg.classList.remove("hidden");
      return;
    }

    const enteredHash = await sha256Hex(value);

    if (enteredHash === ADMIN_HASH_HEX) {
      localStorage.setItem("ctr:admin:auth", "ok");
      window.location.href = "admin.html";
    } else {
      errorMsg.textContent = "Incorrect key. Try again.";
      errorMsg.classList.remove("hidden");
      keyInput.select();
    }
  }

  loginBtn.addEventListener("click", attemptLogin);
  keyInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      attemptLogin();
    }
  });
</script>
</body>
</html>
